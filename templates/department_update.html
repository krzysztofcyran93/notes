{% extends 'base.html' %}

{% block content %}

  <h1 class="is-size-3">Edit Department: {{ department.title }}</h1>

  <form action="{{ url_for('department_update', department_id=department.id) }}" method="POST">
    <div class="field">
      <label class="label" for="title">Title</label>
      <div class="control">
        <input name="title" value="{{ request.form['title'] or department.title }}" class="input"></input>
      </div>
    </div>

    <div class="field is-grouped">
      <div class="columns">
      <div class="column">
        <label class="label" for="body">Users</label>
      </div>
      <div class="column is-1">
          <a class="navbar-item" href="#" aria-label="Add User to department">
            <i class="far fa-plus-square" style="color: green"></i>
          </a>
      </div>
      </div>
        {% for user in users %}
          {% if user.departments %}
            {% for department in user.departments %}
              {% if department.title in department %}
                <div class="column">{{ user.username }}</div>
                <div class="column">
                <a class="navbar-item" href="#" aria-label="Remove User from department">
                  <i class="far fa-minus-square" style="color: red"></i>
                </a>
                </div>
              {% endif %}
            {% endfor %}
          {% endif %}
        {% endfor %}
      <div class="control">
      </div>
    </div>

    <div class="field is-grouped">
      <div class="control">
        <input type="submit" value="Update" class="button is-primary" />
      </div>
      <div class="control">
        <a href="{{ url_for('confirm_delete_department', department_id=department.id) }}" class="button is-danger">Delete</a>
      </div>
      <div class="control">
        <a href="{{ url_for('dropdown', variable_id=department.id, variable=department) }}" class="button">Cancel</a>
      </div>
    </div>
  </form>

{% endblock %}
